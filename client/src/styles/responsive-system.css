/* 
 * Comprehensive Responsive Design System
 * Targeting 30+ devices with desktop-first fidelity
 * Supporting iOS, Android, foldables, tablets, and large phones
 */

/* ===== ROOT VARIABLES ===== */
:root {
  /* Responsive Typography Scale using clamp() */
  --text-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
  --text-sm: clamp(0.875rem, 0.8rem + 0.375vw, 1rem);
  --text-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
  --text-lg: clamp(1.125rem, 1rem + 0.625vw, 1.25rem);
  --text-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
  --text-2xl: clamp(1.5rem, 1.3rem + 1vw, 2rem);
  --text-3xl: clamp(1.875rem, 1.6rem + 1.375vw, 2.5rem);
  --text-4xl: clamp(2.25rem, 1.9rem + 1.75vw, 3rem);
  --text-5xl: clamp(3rem, 2.5rem + 2.5vw, 4rem);
  --text-6xl: clamp(3.75rem, 3rem + 3.75vw, 5rem);

  /* Responsive Spacing Scale */
  --space-1: clamp(0.25rem, 0.2rem + 0.25vw, 0.375rem);
  --space-2: clamp(0.5rem, 0.4rem + 0.5vw, 0.75rem);
  --space-3: clamp(0.75rem, 0.6rem + 0.75vw, 1.125rem);
  --space-4: clamp(1rem, 0.8rem + 1vw, 1.5rem);
  --space-5: clamp(1.25rem, 1rem + 1.25vw, 1.875rem);
  --space-6: clamp(1.5rem, 1.2rem + 1.5vw, 2.25rem);
  --space-8: clamp(2rem, 1.6rem + 2vw, 3rem);
  --space-10: clamp(2.5rem, 2rem + 2.5vw, 3.75rem);
  --space-12: clamp(3rem, 2.4rem + 3vw, 4.5rem);
  --space-16: clamp(4rem, 3.2rem + 4vw, 6rem);
  --space-20: clamp(5rem, 4rem + 5vw, 7.5rem);
  --space-24: clamp(6rem, 4.8rem + 6vw, 9rem);

  /* Touch Target Sizes */
  --touch-target-min: 48px; /* WCAG AA minimum */
  --touch-target-optimal: 56px; /* Material Design optimal */
  --touch-target-large: 64px; /* For primary actions */

  /* Container Widths */
  --container-sm: 640px;
  --container-md: 768px;
  --container-lg: 1024px;
  --container-xl: 1280px;
  --container-2xl: 1536px;

  /* Safe Area Insets for iOS */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
}

/* ===== DEVICE-SPECIFIC BREAKPOINTS ===== */
/* Mobile-first approach with 30+ device coverage */

/* iPhone SE (375px) and smaller phones */
@media (max-width: 374px) {
  .container {
    padding-left: var(--space-3);
    padding-right: var(--space-3);
  }
  
  .touch-target {
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
  }
}

/* Standard mobile phones (375px - 428px) */
/* iPhone 12 mini, iPhone 13/14, Galaxy S21/S22 */
@media (min-width: 375px) and (max-width: 428px) {
  .container {
    padding-left: var(--space-4);
    padding-right: var(--space-4);
  }
  
  .mobile-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-4);
  }
}

/* Large phones and small tablets (429px - 599px) */
/* iPhone 14 Pro Max, Galaxy S23 Ultra, Pixel 7 Pro */
@media (min-width: 429px) and (max-width: 599px) {
  .large-phone-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-5);
  }
  
  .touch-target {
    min-height: var(--touch-target-optimal);
    min-width: var(--touch-target-optimal);
  }
}

/* Small tablets and foldables (600px - 767px) */
/* iPad mini, Surface Duo, Galaxy Z Fold */
@media (min-width: 600px) and (max-width: 767px) {
  .small-tablet {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-6);
  }
  
  .preserve-desktop-layout {
    /* Maintain desktop-like structure */
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }
}

/* Standard tablets (768px - 1023px) */
/* iPad, Galaxy Tab S8, Surface Pro */
@media (min-width: 768px) and (max-width: 1023px) {
  .tablet {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: var(--space-8);
  }
  
  .tablet-desktop-fidelity {
    /* Preserve desktop grid systems */
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--space-6);
  }
  
  .touch-target {
    min-height: var(--touch-target-large);
    min-width: var(--touch-target-large);
  }
}

/* Large tablets and landscape (1024px - 1279px) */
/* iPad Pro, Surface Studio, large Android tablets */
@media (min-width: 1024px) and (max-width: 1279px) {
  .large-tablet {
    /* Near-desktop experience */
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--space-10);
  }
  
  .desktop-fidelity-preserved {
    /* Maintain exact desktop layout structure */
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: stretch;
  }
}

/* Desktop (1280px+) */
@media (min-width: 1280px) {
  .desktop {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: var(--space-12);
  }
}

/* ===== ORIENTATION-SPECIFIC OPTIMIZATIONS ===== */
@media (orientation: landscape) and (max-height: 600px) {
  /* Landscape phones and small tablets */
  .landscape-optimized {
    padding-top: var(--safe-area-inset-top);
    padding-bottom: var(--safe-area-inset-bottom);
  }
  
  .landscape-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-4);
    max-height: calc(100vh - var(--safe-area-inset-top) - var(--safe-area-inset-bottom));
    overflow-y: auto;
  }
}

@media (orientation: portrait) and (min-width: 768px) {
  /* Portrait tablets - preserve desktop hierarchy */
  .portrait-tablet {
    display: flex;
    flex-direction: column;
    gap: var(--space-8);
  }
  
  .portrait-tablet .section {
    width: 100%;
    max-width: none;
  }
}

/* ===== ACCESSIBILITY & TOUCH OPTIMIZATIONS ===== */
.touch-target {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
}

/* Enhance touch feedback */
.touch-target::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  transform: translate(-50%, -50%);
  border-radius: inherit;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.touch-target:hover::before,
.touch-target:focus::before {
  opacity: 0.1;
}

.touch-target:active::before {
  opacity: 0.2;
}

/* ===== RESPONSIVE IMAGES ===== */
.responsive-image {
  width: 100%;
  height: auto;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.responsive-image-container {
  position: relative;
  overflow: hidden;
  border-radius: var(--space-2);
}

/* ===== FLUID TYPOGRAPHY ===== */
.fluid-text {
  font-size: var(--text-base);
  line-height: 1.6;
  letter-spacing: -0.01em;
}

.fluid-heading-1 { font-size: var(--text-6xl); line-height: 1.1; }
.fluid-heading-2 { font-size: var(--text-5xl); line-height: 1.15; }
.fluid-heading-3 { font-size: var(--text-4xl); line-height: 1.2; }
.fluid-heading-4 { font-size: var(--text-3xl); line-height: 1.25; }
.fluid-heading-5 { font-size: var(--text-2xl); line-height: 1.3; }
.fluid-heading-6 { font-size: var(--text-xl); line-height: 1.35; }

/* ===== CONTAINER SYSTEM ===== */
.container {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: var(--space-4);
  padding-right: var(--space-4);
}

@media (min-width: 640px) {
  .container { max-width: var(--container-sm); }
}

@media (min-width: 768px) {
  .container { 
    max-width: var(--container-md);
    padding-left: var(--space-6);
    padding-right: var(--space-6);
  }
}

@media (min-width: 1024px) {
  .container { 
    max-width: var(--container-lg);
    padding-left: var(--space-8);
    padding-right: var(--space-8);
  }
}

@media (min-width: 1280px) {
  .container { 
    max-width: var(--container-xl);
    padding-left: var(--space-10);
    padding-right: var(--space-10);
  }
}

@media (min-width: 1536px) {
  .container { max-width: var(--container-2xl); }
}

/* ===== DARK MODE SUPPORT ===== */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-primary: #0a0a0a;
    --bg-secondary: #1a1a1a;
    --text-primary: #ffffff;
    --text-secondary: #a0a0a0;
    --border-color: #333333;
  }
}

/* ===== REDUCED MOTION SUPPORT ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ===== HIGH CONTRAST SUPPORT ===== */
@media (prefers-contrast: high) {
  .touch-target {
    border: 2px solid currentColor;
  }
  
  .card,
  .button,
  .input {
    border: 2px solid currentColor;
  }
}

/* ===== SAFE AREA UTILITIES ===== */
.safe-area-inset-top { padding-top: var(--safe-area-inset-top); }
.safe-area-inset-right { padding-right: var(--safe-area-inset-right); }
.safe-area-inset-bottom { padding-bottom: var(--safe-area-inset-bottom); }
.safe-area-inset-left { padding-left: var(--safe-area-inset-left); }

.safe-area-inset {
  padding-top: var(--safe-area-inset-top);
  padding-right: var(--safe-area-inset-right);
  padding-bottom: var(--safe-area-inset-bottom);
  padding-left: var(--safe-area-inset-left);
}

/* ===== GRID SYSTEM UTILITIES ===== */
.grid-responsive {
  display: grid;
  gap: var(--space-4);
  grid-template-columns: 1fr;
}

@media (min-width: 600px) {
  .grid-responsive { grid-template-columns: repeat(2, 1fr); }
}

@media (min-width: 768px) {
  .grid-responsive { 
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-6);
  }
}

@media (min-width: 1024px) {
  .grid-responsive { 
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-8);
  }
}

@media (min-width: 1280px) {
  .grid-responsive { 
    grid-template-columns: repeat(6, 1fr);
    gap: var(--space-10);
  }
}

/* ===== SCROLLING OPTIMIZATIONS ===== */
.smooth-scroll {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
}

.scroll-snap-container {
  scroll-snap-type: y mandatory;
  overflow-y: scroll;
  height: 100vh;
}

.scroll-snap-item {
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

/* ===== FOLDABLE DEVICE SUPPORT ===== */
@media (spanning: single-fold-vertical) {
  .foldable-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-8);
  }
}

@media (spanning: single-fold-horizontal) {
  .foldable-layout {
    display: grid;
    grid-template-rows: 1fr 1fr;
    gap: var(--space-8);
  }
}

/* ===== HOVER STATE MANAGEMENT ===== */
@media (hover: hover) and (pointer: fine) {
  /* Desktop hover states */
  .hover-effect:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }
}

@media (hover: none) and (pointer: coarse) {
  /* Touch device states */
  .hover-effect:active {
    transform: scale(0.98);
  }
}