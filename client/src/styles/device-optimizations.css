/* 
 * Device-Specific Optimizations for 30+ Devices
 * Preserving Desktop UI Structure with High Fidelity
 * Targeting iOS, Android, Foldables, Tablets, and Large Phones
 */

/* ===== META VIEWPORT OPTIMIZATION ===== */
html {
  /* Ensure proper viewport handling */
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* ===== IPHONE OPTIMIZATIONS ===== */

/* iPhone SE (375x667) */
@media screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) {
  .iphone-se-optimization {
    /* Compact layout with desktop hierarchy preserved */
    --section-padding: clamp(1rem, 3vw, 1.5rem);
    --grid-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
  
  .hero-section {
    min-height: 60vh;
    padding: var(--section-padding);
  }
}

/* iPhone 12 mini (375x812) */
@media screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {
  .iphone-12-mini-optimization {
    --section-padding: clamp(1.25rem, 4vw, 2rem);
    --grid-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
  
  .navigation-menu {
    padding: 0.75rem 1rem;
    font-size: clamp(0.9rem, 2.5vw, 1rem);
  }
}

/* iPhone 12/13/14 (390x844) */
@media screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) {
  .iphone-standard-optimization {
    --section-padding: clamp(1.5rem, 4vw, 2.25rem);
    --grid-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
  
  .desktop-grid-preserved {
    display: grid;
    grid-template-columns: var(--grid-columns);
    gap: clamp(1rem, 3vw, 1.5rem);
  }
}

/* iPhone 14 Plus/Pro Max (428x926, 430x932) */
@media screen and (min-device-width: 428px) and (max-device-width: 430px) and (-webkit-device-pixel-ratio: 3) {
  .iphone-pro-max-optimization {
    --section-padding: clamp(1.75rem, 4.5vw, 2.5rem);
    --grid-columns: repeat(auto-fit, minmax(350px, 1fr));
  }
  
  .large-phone-layout {
    /* Near-tablet experience while maintaining desktop structure */
    display: flex;
    flex-direction: column;
    gap: clamp(1.5rem, 4vw, 2rem);
  }
  
  .services-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }
}

/* ===== IPAD OPTIMIZATIONS ===== */

/* iPad mini (768x1024) */
@media screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) {
  .ipad-mini-optimization {
    /* Preserve desktop layout structure */
    --section-padding: clamp(2rem, 5vw, 3rem);
    --grid-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
  
  .desktop-fidelity-preserved {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 2rem;
  }
  
  .tablet-navigation {
    padding: 1rem 2rem;
    font-size: 1.1rem;
  }
  
  .hero-content {
    grid-column: span 8;
    padding: 3rem 0;
  }
  
  .sidebar-content {
    grid-column: span 4;
  }
}

/* iPad Air (820x1180) */
@media screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) {
  .ipad-air-optimization {
    --section-padding: clamp(2.5rem, 5.5vw, 3.5rem);
    --grid-columns: repeat(auto-fit, minmax(350px, 1fr));
  }
  
  .desktop-layout-maintained {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: stretch;
    gap: 2.5rem;
  }
}

/* iPad Pro 11" (834x1194) */
@media screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) {
  .ipad-pro-11-optimization {
    /* Near-desktop experience */
    --section-padding: clamp(3rem, 6vw, 4rem);
    --grid-columns: repeat(3, 1fr);
  }
  
  .desktop-grid-system {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 2.5rem;
    max-width: 100%;
  }
  
  .three-column-layout {
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
  }
}

/* iPad Pro 12.9" (1024x1366) */
@media screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) {
  .ipad-pro-12-optimization {
    /* Full desktop layout preserved */
    --section-padding: clamp(3.5rem, 6.5vw, 4.5rem);
    --grid-columns: repeat(4, 1fr);
  }
  
  .desktop-exact-replica {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 3rem;
    max-width: 100%;
  }
  
  .four-column-layout {
    grid-template-columns: repeat(4, 1fr);
    gap: 2.5rem;
  }
}

/* ===== ANDROID PHONE OPTIMIZATIONS ===== */

/* Galaxy S21/S22/S23 (360x800, 360x780) */
@media screen and (device-width: 360px) and (max-device-height: 800px) {
  .galaxy-s-optimization {
    --section-padding: clamp(1.25rem, 3.5vw, 1.75rem);
    --grid-columns: repeat(auto-fit, minmax(280px, 1fr));
  }
  
  .android-layout-preserved {
    display: flex;
    flex-direction: column;
    gap: clamp(1rem, 3vw, 1.5rem);
  }
}

/* Galaxy S23 Ultra (384x854) */
@media screen and (device-width: 384px) and (device-height: 854px) {
  .galaxy-ultra-optimization {
    --section-padding: clamp(1.5rem, 4vw, 2rem);
    --grid-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
  
  .large-android-layout {
    display: grid;
    grid-template-columns: var(--grid-columns);
    gap: clamp(1.25rem, 3.5vw, 1.75rem);
  }
}

/* Pixel 6/7/8 (393x851, 384x854) */
@media screen and (min-device-width: 384px) and (max-device-width: 393px) and (min-device-height: 851px) {
  .pixel-optimization {
    --section-padding: clamp(1.5rem, 4vw, 2rem);
    --grid-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
  
  .google-pixel-layout {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    gap: 1.5rem;
  }
}

/* ===== ANDROID TABLET OPTIMIZATIONS ===== */

/* Galaxy Tab S8 (753x1037) */
@media screen and (device-width: 753px) and (device-height: 1037px) {
  .galaxy-tab-s8-optimization {
    --section-padding: clamp(2rem, 5vw, 2.75rem);
    --grid-columns: repeat(auto-fit, minmax(320px, 1fr));
  }
  
  .android-tablet-desktop-fidelity {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 2rem;
  }
}

/* Galaxy Tab S8+ (800x1280) */
@media screen and (device-width: 800px) and (device-height: 1280px) {
  .galaxy-tab-s8-plus-optimization {
    --section-padding: clamp(2.5rem, 5.5vw, 3.25rem);
    --grid-columns: repeat(3, 1fr);
  }
  
  .large-android-tablet {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 2.5rem;
  }
}

/* Galaxy Tab S8 Ultra (900x1440) */
@media screen and (device-width: 900px) and (device-height: 1440px) {
  .galaxy-tab-ultra-optimization {
    /* Desktop-like experience */
    --section-padding: clamp(3rem, 6vw, 4rem);
    --grid-columns: repeat(4, 1fr);
  }
  
  .ultra-tablet-layout {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 3rem;
  }
}

/* ===== FOLDABLE DEVICE OPTIMIZATIONS ===== */

/* Galaxy Z Fold 4 - Folded (344x882) */
@media screen and (device-width: 344px) and (device-height: 882px) {
  .galaxy-fold-closed {
    --section-padding: clamp(1rem, 3vw, 1.5rem);
    --grid-columns: 1fr;
  }
  
  .foldable-narrow-layout {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
}

/* Galaxy Z Fold 4 - Unfolded (768x1114) */
@media screen and (device-width: 768px) and (device-height: 1114px) {
  .galaxy-fold-open {
    --section-padding: clamp(2rem, 5vw, 3rem);
    --grid-columns: repeat(2, 1fr);
  }
  
  .foldable-wide-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
  }
}

/* Surface Duo (540x720) */
@media screen and (device-width: 540px) and (device-height: 720px) {
  .surface-duo-optimization {
    --section-padding: clamp(1.5rem, 4vw, 2rem);
    --grid-columns: repeat(auto-fit, minmax(240px, 1fr));
  }
  
  .dual-screen-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }
}

/* ===== SURFACE DEVICE OPTIMIZATIONS ===== */

/* Surface Pro 8/9 (880x1240) */
@media screen and (device-width: 880px) and (device-height: 1240px) {
  .surface-pro-optimization {
    /* Desktop-class experience */
    --section-padding: clamp(3rem, 6vw, 4rem);
    --grid-columns: repeat(3, 1fr);
  }
  
  .surface-pro-desktop-layout {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: 2.5rem;
  }
  
  .surface-pro-navigation {
    padding: 1.25rem 2rem;
    font-size: 1.125rem;
  }
}

/* Surface Go 3 (540x720) */
@media screen and (device-width: 540px) and (device-height: 720px) {
  .surface-go-optimization {
    --section-padding: clamp(1.5rem, 4vw, 2rem);
    --grid-columns: repeat(auto-fit, minmax(220px, 1fr));
  }
  
  .compact-surface-layout {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }
}

/* ===== ORIENTATION-SPECIFIC OPTIMIZATIONS ===== */

/* Landscape Mode Optimizations */
@media screen and (orientation: landscape) {
  .landscape-optimized {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  .landscape-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: clamp(1rem, 3vw, 2rem);
  }
  
  .landscape-navigation {
    padding: 0.75rem clamp(1rem, 3vw, 2rem);
  }
}

/* Portrait Mode Optimizations for Tablets */
@media screen and (orientation: portrait) and (min-width: 768px) {
  .portrait-tablet-optimized {
    display: flex;
    flex-direction: column;
    gap: clamp(2rem, 5vw, 3rem);
  }
  
  .portrait-section {
    width: 100%;
    max-width: none;
    padding: clamp(2rem, 5vw, 3rem);
  }
}

/* ===== TOUCH TARGET OPTIMIZATIONS ===== */

/* iOS Touch Targets */
.ios-device .touch-target {
  min-height: 44px;
  min-width: 44px;
  padding: 0.75rem 1rem;
}

/* Android Touch Targets */
.android-device .touch-target {
  min-height: 48px;
  min-width: 48px;
  padding: 0.875rem 1.125rem;
}

/* Large Device Touch Targets */
.device-tablet .touch-target,
.device-foldable .touch-target {
  min-height: 56px;
  min-width: 56px;
  padding: 1rem 1.25rem;
}

/* ===== RESPONSIVE IMAGE OPTIMIZATIONS ===== */

/* Mobile Image Optimization */
.device-mobile .responsive-image {
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: clamp(0.5rem, 2vw, 1rem);
}

/* Tablet Image Optimization */
.device-tablet .responsive-image {
  width: 100%;
  height: auto;
  object-fit: cover;
  border-radius: clamp(0.75rem, 2.5vw, 1.25rem);
}

/* ===== TYPOGRAPHY SCALING ===== */

/* Mobile Typography */
.device-mobile {
  --heading-scale: 0.875;
  --body-scale: 0.9;
}

/* Tablet Typography */
.device-tablet {
  --heading-scale: 1;
  --body-scale: 1;
}

/* Large Tablet Typography */
.device-tablet.screen-xl,
.device-tablet.screen-2xl {
  --heading-scale: 1.125;
  --body-scale: 1.05;
}

/* Apply typography scaling */
h1, h2, h3, h4, h5, h6 {
  font-size: calc(var(--base-font-size, 1rem) * var(--heading-scale, 1));
}

p, span, div {
  font-size: calc(var(--base-font-size, 1rem) * var(--body-scale, 1));
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

/* GPU Acceleration for Smooth Animations */
.device-mobile .animated-element,
.device-tablet .animated-element {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Reduced Motion for Battery Saving */
@media (prefers-reduced-motion: reduce) {
  .device-mobile *,
  .device-tablet * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ===== ACCESSIBILITY ENHANCEMENTS ===== */

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .touch-target {
    border: 2px solid currentColor;
    background-color: transparent;
  }
  
  .card, .button {
    border: 2px solid currentColor;
    box-shadow: none;
  }
}

/* Large Text Support */
@media (prefers-reduced-motion: no-preference) and (min-resolution: 192dpi) {
  .retina-optimized {
    font-weight: 300;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* ===== DARK MODE DEVICE OPTIMIZATIONS ===== */

@media (prefers-color-scheme: dark) {
  .device-mobile,
  .device-tablet {
    --bg-primary: #000000;
    --bg-secondary: #111111;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
    --border-color: #333333;
  }
  
  /* OLED Optimization for Samsung devices */
  .samsung-galaxy {
    --bg-primary: #000000;
    --bg-secondary: #0a0a0a;
  }
}

/* ===== SCROLL BEHAVIOR OPTIMIZATIONS ===== */

/* iOS Scroll Optimization */
.ios-device {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Android Scroll Optimization */
.android-device {
  overscroll-behavior: contain;
  scroll-behavior: smooth;
}

/* Tablet Scroll Snap */
.device-tablet .scroll-container {
  scroll-snap-type: y mandatory;
  overflow-y: scroll;
}

.device-tablet .scroll-item {
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

/* ===== CONTAINER QUERIES (Future-Proof) ===== */

@container (min-width: 768px) {
  .container-aware {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }
}

@container (min-width: 1024px) {
  .container-aware {
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2.5rem;
  }
}